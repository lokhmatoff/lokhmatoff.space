---
title: Roll & Role
uid: 2502031904
date: 2025-02-03
tags:
  - ttrpg
aliases:
  - Roll & Role
  - RnR
  - rnr
  - R&R
  - эрэнэр
  - ЭРЭНЭР
  - арэнар
draft: true
---

## 2025

Персональный ассистент Игрока и Мастера Подземелий для игры в различные настольные ролевые системы типа [[Dungeons & Dragons]], [[Pathfinder]], [[Genesis]], [[Hogwarts ttRPG]] и другие. Система выполнена в виде адаптивного веб-приложения, а также мини-приложения для [[Telegram]].

> [!note] На момент выпуска MVP работает одна ролевая система — [[Hogwarts ttRPG]]

Узнать подробности и присоединиться к игре [можно здесь](https://rnr.lokhmatoff.space).

### Функции игрока

1. Создание персонажа для определённой настольной кампании;
2. Управление персонажем во время активной игровой сессии;
3. Участие в активных игровых сессиях, возможность вести заметки.

### Функции мастера подземелий

1. Управление ролевыми кампаниями;
2. Управление сессиями в игровых кампаниях;
3. Управление шаблонами персонажей и персонажами игроков в рамках кампании;
4. Управление списками предметов, заклинаний, NPC, монстров итд.

---

## Проектирование

> [!danger] ЧЕРНОВИК (Общение с Chat GPT 3.5)

Для вашего приложения-компаньона по игре в настольные ролевые игры типа Dungeons & Dragons, предлагаю следующую структуру базы данных в PostgreSQL:

### Таблицы

1. Пользователи (Users)
	- user_id (PK)
	- username
	- email
	- password
	- role (player, dungeon_master)
2. Персонажи (Characters)
	- character_id (PK)
	- character_name
	- class
	- race
	- level
	- user_id (FK к Users)
3. Кампании (Campaigns)
	- campaign_id (PK)
	- campaign_name
	- description
	- dungeon_master_id (FK к Users)
4. Сессии (Sessions)
	- session_id (PK)
	- session_date
	- campaign_id (FK к Campaigns)
5. Описания кампаний (CampaignDescriptions)
	- campaign_id (PK, FK к Campaigns)
	- lore
	- Описания сессий (SessionDescriptions)
	- session_id (PK, FK к Sessions)
	- description
6. Описания сессий (SessionDescriptions)
	- session_id (PK, FK к Sessions)
	- description
7. Предметы (Items)
	- item_id (PK)
	- item_name
	- description
8. Заклинания (Spells)
	- spell_id (PK)
	- spell_name
	- description
9. Неигровые персонажи (NonPlayerCharacters)
	- npc_id (PK)
	- npc_name
	- npc_type (monster, NPC, etc.)
	- description
10. Ивенты сессии (SessionEvents)
	- event_id (PK)
	- session_id (FK к Sessions)
	- event_type
	- event_description

### Отношения

- Пользователи могут иметь несколько персонажей (один ко многим)
- Каждый персонаж принадлежит только одному пользователю
- Каждая кампания имеет одного подземельного мастера (один ко многим)
- Каждая кампания может иметь множество сессий (один ко многим)
- Каждая сессия принадлежит только одной кампании
- Каждая кампания имеет одно описание
- Каждая сессия имеет одно описание

Это основная структура, которая позволит управлять персонажами, кампаниями и сессиями в вашем приложении для настольных ролевых игр. Если у вас есть дополнительные требования или вопросы, не стесняйтесь задавать.


### Изменения в существующих таблицах

- Персонажи (Characters)
	- Добавим поля race и level как NULLABLE
	- Добавим поле campaign_id (FK к Campaigns)
- Описания сессий (SessionDescriptions)
	- Изменим структуру на предисловие и заключение

#### Отношения

- Каждый персонаж должен быть связан с кампанией, в которой он играет
- Добавим отношения между сессиями и ивентами для отслеживания событий в рамках активной сессии

Эти изменения позволят учесть дополнительные требования по учету предметов, заклинаний, неигровых персонажей и ивентов в вашем приложении для настольных ролевых игр. Если у вас есть еще какие-либо запросы или вопросы, не стесняйтесь обращаться.

### Дополнительные таблицы

11. Шаблоны персонажей (CharacterTemplates)
	- template_id (PK)
	- template_name
	- system_id (FK к GameSystems)
12. Игровые системы (GameSystems)
	- system_id (PK)
	- system_name
	- system_description

### Изменения в существующих таблицах

- Персонажи (Characters)
	- Добавим поле template_id (FK к CharacterTemplates)
- Кампании (Campaigns)
	- Добавим поле system_id (FK к GameSystems)

#### Отношения

- Каждый персонаж может быть создан на основе определенного шаблона
- Каждый шаблон привязан к конкретной игровой системе
- Каждая кампания связана с определенной игровой системой

Эти изменения позволят вам применять шаблоны персонажей с определенным набором полей разных типов, привязанные к игровым системам, при создании персонажей в рамках кампаний. Если у вас есть еще какие-либо вопросы или требования, не стесняйтесь обращаться.

### Дополнительные таблицы по EAV

13. Атрибуты шаблона персонажа (CharacterTemplateAttributes)
	- attribute_id (PK)
	- template_id (FK к CharacterTemplates)
	- attribute_name
	- attribute_type (text, number, boolean, etc.)
14. Значения атрибутов шаблона персонажа (CharacterTemplateAttributeValues)
	- attribute_value_id (PK)
	- attribute_id (FK к CharacterTemplateAttributes)
	- character_id (FK к Characters)
	- value

#### Отношения

- Каждый атрибут шаблона персонажа принадлежит определенному шаблону
- Для каждого атрибута шаблона персонажа хранится значение для конкретного персонажа

Эта структура позволит вам создать гибкую схему шаблонов персонажей, где можно добавлять атрибуты различных типов и применять их к персонажам в соответствии с выбранным шаблоном. Если у вас возникнут дополнительные вопросы или потребуется дальнейшая помощь, не стесняйтесь обращаться.

---

## Каталог
